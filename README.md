adaptTo() 2017 - Lightning Talk: Provisioning local AEM instance with CONGA
========================================================================

Code samples for lightning talk at adaptTo() 2017 in Berlin:<br/>
https://adapt.to/2017/en/schedule/lightning-talks.html


Requirements
------------

* Java 8
* Maven 3.3.9
* AEM 6.3 Author running on port 4502
* AEM 6.3 Publish running on port 4503 (optional)


Try it out
----------

* Deploy the sample application to your local AEM instances using the script
  * For author instance on port 4502: `deploy_author.sh`
  * For publish instance on port 4503: `deploy_publish.sh`
  * For both author and publish: `deploy_author_publish.sh`


What is it doing
----------------

The deploy scripts are really simple and mainly contain two commands:

* Build the Demo application (including CONGA artifacts)
* Upload the CONGA artifacts (=AEM packages) in the correct order to your local AEM instance(s)

What is generated by CONGA and uploaded with the second command:

* The configuration of the local environments (only a few "high-level" switches) is done here:
  [Environment: development.yaml](https://github.com/adaptto/2017-provisioning-local-aem-with-conga/blob/master/config-definition/src/main/dev-environments/development.yaml)
* This CONGA role describes what configuration artifacts CONGA should generate
  [Role: adaptto-provisionaem-aem-cms.yaml](https://github.com/adaptto/2017-provisioning-local-aem-with-conga/blob/master/config-definition/src/main/roles/adaptto-provisionaem-aem-cms.yaml)
  (and it inherits from the generic `aem-cms`role from [CONGA AEM Definitions](http://devops.wcm.io/conga/definitions/aem/))
* It includes a set of 3rdparty packages, in this case the [AEM Core WCM Components](https://github.com/Adobe-Marketing-Cloud/aem-core-wcm-components) and [ACS AEM Commons](https://adobe-consulting-services.github.io/acs-aem-commons/)
* It includes the application packages including Sample Content
* And configuration package dynamically generated by CONGA:
  * Generic AEM config e.g. to enable DavEx for CRX DE lite on development machines
  * A simplified DAM asset workflow
  * Replication Agent configuration (on author)
  * Parameterized OSGi configuration as defined in [this template](https://github.com/adaptto/2017-provisioning-local-aem-with-conga/blob/master/config-definition/src/main/templates/adaptto-provisionaem-aem-cms/adaptto-provisionaem-aem-cms-config.provisioning.hbs)
  * Arbitrary content package with a languages node configuration to configure the [AEM Translator](https://docs.adobe.com/docs/en/aem/6-3/develop/components/i18n/translator.html) (on author)

It's easy to add your own stuff in the same fashion.

The required [CONGA](http://devops.wcm.io/conga/) maven plugins are configured in the [wcm.io aem-global-parent POM](http://repo1.maven.org/maven2/io/wcm/maven/io.wcm.maven.aem-global-parent/1.2.6/io.wcm.maven.aem-global-parent-1.2.6.pom).
